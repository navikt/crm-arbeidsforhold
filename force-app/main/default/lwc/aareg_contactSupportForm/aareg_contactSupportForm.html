<template>
  <div class="container">
    <form if:false={inquirySubmitted}>
      <div class="slds-m-vertical_xx-large">
        <div class="slds-grid slds-grid_vertical support-form">
          <div class="slds-col slds-align_absolute-center slds-m-vertical_small">
            <h1>Ny henvendelse</h1>
          </div>
          <div class="slds-col slds-m-vertical_small">
            <label>Hva gjelder dette?</label>
            <select onchange={handleInputChange} data-id="Type__c">
              <option value="">Velg</option>
              <option value="Eksisterende Søknad">Eksisterende Søknad</option>
              <option value="Annet">Annet</option>
            </select>
          </div>
          <div class="slds-col slds-m-vertical_small" if:true={regardingExistingApplication}>
            <label>Søknader</label>
            <select onchange={handleRelatedApplicationChange}>
              <option value="">Velg</option>
              <template for:each={existingApplications} for:item="option">
                <option key={option.Id} value={option.Id}>{option.Name} - {option.Status__c}</option>
              </template>
            </select>
          </div>
          <div class="slds-col slds-m-vertical_small">
            <label>Beskrivelse</label>
            <textarea onchange={handleInputChange} data-id="Description__c"></textarea>
          </div>
          <div class="slds-col slds-align_absolute-center slds-m-vertical_small">
            <button type="submit" name="Send inn" class="button button-main" onclick={handleSubmit}>Send inn</button>
          </div>
        </div>
      </div>
    </form>
    <template if:true={inquirySubmitted}>
      <div class="submission-success">
        <h2>Takk for din henvendelse. Vi svarer deg så fort vi kan.</h2>
      </div>
    </template>
    <template if:true={isLoading}>
      <lightning-spinner alternative-text="Loading" size="large"></lightning-spinner>
    </template>
  </div>
</template>
