<template>
  <template if:true={isLoaded}>
    <div class="home-container bedriftsmeny">
      <div>
        <h1 class="typo-innholdstittel bedriftsmeny__tittel">Min side – søknad om tilgang til Aa-registeret</h1>
      </div>
      <div>
        <template if:true={organizations}>
          <select class="organization-select" aria-invalid="false" onchange={handleOrganizationChange}>
            <option if:false={hasPreviouslySelectedOrganization} value="">-- Velg virksomhet --</option>
            <template for:each={organizations} for:item="organization">
              <option key={organization.OrganizationNumber} value={organization.OrganizationNumber}>
                <div>
                  <p>{organization.Name}- ({organization.OrganizationNumber})</p>
                </div>
              </option>
            </template>
          </select>
        </template>
      </div>
    </div>
    <template if:true={hasAccess}>
      <div if:true={hasApplicationAccess} class="slds-grid inner-container">
        <div class="slds-col">
          <div class="slds-col">
            <c-link-panel
              title="Ny søknad"
              sub-title="Her kan du opprette en ny søknad."
              relative-path="custom_ny_soknad_aa_registret__c"
              style="display: flex; width: 100%"
            ></c-link-panel>
            </div>

          <div if:true={hasSupportAccess} class="slds-col">
            <c-link-panel
              title="Mine meldinger"
              sub-title="Her finner du en oversikt av dine meldinger"
              relative-path="Mine_Meldinger__c"
              style="display: flex; width: 100%"
            ></c-link-panel>
          </div>

          <div if:true={hasApplicationAccess} class="slds-col">
            <c-link-panel
              title="Mine avtaler"
              sub-title="Her finner du en oversikt av dine avtaler"
              relative-path="Mine_Avtaler__c"
              style="display: flex; width: 100%"
            ></c-link-panel>
          </div>
        </div>

        <div if:true={hasApplicationAccess} class="slds-col">
          <div class="slds-col">
            <c-link-panel
              title="Mine søknader"
              sub-title="Her finner du en oversikt av dine søknader"
              relative-path="custom_mine_soknader__c"
              style="display: flex; width: 100%"
            ></c-link-panel>
          </div>

          <div if:true={hasSupportAccess} class="slds-col">
            <c-link-panel
              title="Support"
              sub-title="Er de noe du lurer på? Send oss en melding."
              relative-path="Ny_Melding__c"
              style="display: flex; width: 100%"
            ></c-link-panel>
          </div>
        </div>
      </div>
    </template>
    <template if:false={hasAccess}>
      <c-aareg_missing-access></c-aareg_missing-access>
    </template>
  </template>
  <template if:false={isLoaded}>
    <lightning-spinner alternative-text="Loading" size="large"></lightning-spinner>
  </template>
</template>
