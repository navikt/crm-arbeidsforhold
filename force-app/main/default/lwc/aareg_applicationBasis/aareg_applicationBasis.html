<template>
  <div class="app-section">
    <div if:false={isOtherOrganizationType} class="row">
      <div class="column">
        <span class="form-control">
          <label for="hjemmel">
            <abbr class="slds-required" title="required">* </abbr>
            Hjemmel for utlevering</label
          >
          <lightning-helptext
            content="Personopplysningene i Aa-registeret er underlagt taushetsplikt etter arbeids- og velferdsforvaltningsloven § 7. Opplysningene kan kun utleveres dersom dere har hjemmel i lov eller forskrift til å innhente opplysningene. "
            class="slds-m-left_xx-small"
          >
          </lightning-helptext>
          <select
            name="hjemmel"
            aria-invalid="false"
            id="hjemmel"
            data-id="legal-basis"
            disabled={readOnly}
            onchange={handleLegalBasisChange}
            required
          >
            <option if:false={legalBasisValue} value="">Velg</option>
            <template for:each={legalBasisOptions} for:item="option">
              <option key={option.key} value={option.key}>{option.value}</option>
            </template>
          </select>
          <small>Error Message</small>
        </span>
      </div>
      <div class="column">
        <span class="form-control">
          <label for="Formal">
            <abbr class="slds-required" title="required">* </abbr>
            Formål</label
          >
          <lightning-helptext
            content="Redegjør for deres behov for opplysningene fra Aa-registeret, hva og hvordan opplysningene skal benyttes. Personopplysninger skal kun samles inn for spesifikke uttrykkelig angitte og berettigede formål, samt være begrenset til det som er nødvendig for formålene de behandles for (dataminimering) dette følger av personvernlovgivningen og Aa-registerforskriften § 11 b."
            class="slds-m-left_xx-small"
          >
          </lightning-helptext>
          <select
            name="Formål"
            aria-invalid="false"
            id="Formal"
            data-id="purpose"
            disabled={readOnly}
            onchange={handlePurposeChange}
            required
          >
            <option if:false={purposeValue} value="">Velg</option>
            <template for:each={purposeOptions} for:item="option">
              <option key={option.key} value={option.key}>{option.value}</option>
            </template>
          </select>
          <small>Error Message</small>
        </span>
      </div>
    </div>

    <template if:true={showOtherInput}>
      <div class="row">
        <div class="column">
          <span class="form-control">
            <label for="annet-hjemmel">
              <abbr class="slds-required" title="required">* </abbr>
              Oppgi hjemmel for utlevering</label
            >
            <textarea
              name="annet hjemmel"
              id="annet-hjemmel"
              data-id="other-legal-basis"
              class="form-input-text-area"
              disabled={readOnly}
              onchange={handleInputChange}
              onkeyup={countOtherLegalBasisChar}
              maxlength="255"
              required
            >
            {applicationBasis.OtherLegalBasis__c}
            </textarea>
            <span class="character-count">{remainingOtherLegalBasisChar}</span>
            <small>Error Message</small>
          </span>
        </div>
        <div class="column">
          <span class="form-control">
            <label for="annet-formal">
              <abbr class="slds-required" title="required">* </abbr>
              Oppgi formål</label
            >
            <textarea
              name="annet formål"
              id="annet-formal"
              data-id="other-purpose"
              class="form-input-text-area"
              disabled={readOnly}
              onchange={handleInputChange}
              onkeyup={countOtherPurposeChar}
              maxlength="255"
              required
            >
            {applicationBasis.OtherPurpose__c}
            </textarea>
            <span class="character-count">{remainingOtherPurposeChar}</span>
            <small>Error Message</small>
          </span>
        </div>
      </div>
    </template>
    <div class="row">
      <div class="column">
        <span class="form-control">
          <label for="behandlingsgrunnlag">
            <abbr class="slds-required" title="required">* </abbr>
            Behandlingsgrunnlag</label
          >
          <lightning-helptext
            content="Her skal du opplyse om hvilket rettslig grunnlag som ligger til grunn for behandlingen, jf. oppgitt formål. All behandling av personopplysninger må ha et rettslig grunnlag for at den skal være lovlig i henhold til personvernlovgivningen. 
            Eksempler på rettslig grunnlag kan være: Hjemmel i lov/forskrift, Samtykke fra den registrerte, Nødvendighetsgrunn "
            class="slds-m-left_xx-small"
          >
          </lightning-helptext>
          <textarea
            name="Behandlingsgrunnlag"
            id="behandlingsgrunnlag"
            class="form-input-text-area"
            data-id="processing-basis"
            disabled={readOnly}
            onchange={handleInputChange}
            required
          >
          {applicationBasis.ProcessingBasis__c}
          </textarea>
          <small>Error Message</small>
        </span>
      </div>
    </div>
  </div>
</template>
